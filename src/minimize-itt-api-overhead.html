

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Minimize ITT API Overhead &mdash; ITT/JIT APIs Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
    <link rel="canonical" href="https://intel.github.io/ittapi/src/minimize-itt-api-overhead.html" />
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ITT API Reference" href="itt-api-reference.html" />
    <link rel="prev" title="Instrument Your Application" href="instrument-your-application.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ITT/JIT APIs Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Build from Source Code</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api-support.html">Use the ITT/JIT APIs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="api-support.html#c-c-api-usage-and-reference">C/C++ API Usage and Reference:</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="itt-api-support.html">Instrumentation and Tracing Technology (ITT) API</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="itt-api-support.html#itt-api-usage-and-reference">ITT API Usage and Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="jit-api-support.html">Just-In-Time (JIT) API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api-support.html#other-language-api-bindings">Other Language API Bindings:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ref_collector.html">ITT API Reference Collector</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/intel/ittapi">GitHub Project</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ITT/JIT APIs Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="api-support.html">Use the ITT/JIT APIs</a></li>
          <li class="breadcrumb-item"><a href="itt-api-support.html">Instrumentation and Tracing Technology (ITT) API</a></li>
      <li class="breadcrumb-item active">Minimize ITT API Overhead</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/src/minimize-itt-api-overhead.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="minimize-itt-api-overhead">
<span id="id1"></span><h1>Minimize ITT API Overhead<a class="headerlink" href="#minimize-itt-api-overhead" title="Link to this heading"></a></h1>
<p>The extent of instrumentation you add to your application determines the
amount of overhead introduced by the ITT API and its impact on application
performance. To minimize this overhead, aim for a balance between desired
application performance and the amount of performance data you want to collect.</p>
<p>Use these guidelines:</p>
<ul class="simple">
<li><p>Add instrumentation to only those paths in your application that are
important for analysis.</p></li>
<li><p>Create ITT domains and string handles outside the critical paths.</p></li>
<li><p>Filter data collection by different aspects of your application that
can be analyzed separately. The overhead for a disabled API call
(thus filtering out the associated call) is always less than 10 clock
ticks.</p></li>
</ul>
<section id="conditional-compilation">
<h2>Conditional Compilation<a class="headerlink" href="#conditional-compilation" title="Link to this heading"></a></h2>
<p>In the release version of your code, use conditional compilation to turn off
annotations. Before you include <code class="docutils literal notranslate"><span class="pre">ittnotify.h</span></code> during compilation, define the
macro <code class="docutils literal notranslate"><span class="pre">INTEL_NO_ITTNOTIFY_API</span></code> to eliminate all <code class="docutils literal notranslate"><span class="pre">__itt_*</span></code> functions from
your code.</p>
<p>By defining this macro, you can also remove the static library from the
linking stage.</p>
</section>
<section id="usage-example">
<h2>Usage Example:<a class="headerlink" href="#usage-example" title="Link to this heading"></a></h2>
<p>The ITT APIs include a subset of functions that create domains and string
handles. These functions always return identical handles for the same domain
names and strings. This action requires the subset of functions to perform
string comparisons and table lookups. These comparisons and lookups can incur
serious performance penalties. Additionally, the performance of these functions
is proportional to the log of the number of created domains or string handles.
A good practice is to create domains and string handles in the global scope,
or during application startup.</p>
<p>The following code section creates two domains in the global scope. You can use
these domains to control the level of detail that is written to the trace file.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ittnotify.h&quot;</span>

<span class="c1">// Create domains at global scope.</span>
<span class="n">__itt_domain</span><span class="o">*</span><span class="w"> </span><span class="n">basic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">__itt_domain_create</span><span class="p">(</span><span class="sa">L</span><span class="s">&quot;MyFunction.Basic&quot;</span><span class="p">);</span>
<span class="n">__itt_domain</span><span class="o">*</span><span class="w"> </span><span class="n">detailed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">__itt_domain_create</span><span class="p">(</span><span class="sa">L</span><span class="s">&quot;MyFunction.Detailed&quot;</span><span class="p">);</span>

<span class="c1">// Create string handles at global scope.</span>
<span class="n">__itt_string_handle</span><span class="o">*</span><span class="w"> </span><span class="n">h_my_function</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">__itt_string_handle_create</span><span class="p">(</span><span class="sa">L</span><span class="s">&quot;MyFunction&quot;</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">MyFunction</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">__itt_task_begin</span><span class="p">(</span><span class="n">basic</span><span class="p">,</span><span class="w"> </span><span class="n">__itt_null</span><span class="p">,</span><span class="w"> </span><span class="n">__itt_null</span><span class="p">,</span><span class="w"> </span><span class="n">h_my_function</span><span class="p">);</span>
<span class="w">    </span><span class="n">Foo</span><span class="p">(</span><span class="n">arg</span><span class="p">);</span>
<span class="w">    </span><span class="n">FooEx</span><span class="p">();</span>
<span class="w">    </span><span class="n">__itt_task_end</span><span class="p">(</span><span class="n">basic</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">__itt_string_handle</span><span class="o">*</span><span class="w"> </span><span class="n">h_foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">__itt_string_handle_create</span><span class="p">(</span><span class="sa">L</span><span class="s">&quot;Foo&quot;</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">Foo</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// Skip tracing detailed data if the detailed domain is disabled.</span>
<span class="w">    </span><span class="n">__itt_task_begin</span><span class="p">(</span><span class="n">detailed</span><span class="p">,</span><span class="w"> </span><span class="n">__itt_null</span><span class="p">,</span><span class="w"> </span><span class="n">__itt_null</span><span class="p">,</span><span class="w"> </span><span class="n">h_foo</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Do some work here...</span>
<span class="w">    </span><span class="n">__itt_task_end</span><span class="p">(</span><span class="n">detailed</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">__itt_string_handle</span><span class="o">*</span><span class="w"> </span><span class="n">h_foo_ex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">__itt_string_handle_create</span><span class="p">(</span><span class="sa">L</span><span class="s">&quot;FooEx&quot;</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">FooEx</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// Skip tracing detailed data if the detailed domain is disabled.</span>
<span class="w">    </span><span class="n">__itt_task_begin</span><span class="p">(</span><span class="n">detailed</span><span class="p">,</span><span class="w"> </span><span class="n">__itt_null</span><span class="p">,</span><span class="w"> </span><span class="n">__itt_null</span><span class="p">,</span><span class="w"> </span><span class="n">h_foo_ex</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Do some work here...</span>
<span class="w">    </span><span class="n">__itt_task_end</span><span class="p">(</span><span class="n">detailed</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// This is my entry point.</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">argc</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Disable detailed domain if we do not need tracing from that</span>
<span class="w">    </span><span class="c1">// in this application run.</span>
<span class="w">    </span><span class="n">detailed</span><span class="w"> </span><span class="o">-&gt;</span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">MyFunction</span><span class="p">(</span><span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]));</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="instrument-your-application.html" class="btn btn-neutral float-left" title="Instrument Your Application" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="itt-api-reference.html" class="btn btn-neutral float-right" title="ITT API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025 Intel Corporation.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>